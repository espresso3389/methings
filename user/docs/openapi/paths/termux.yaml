termuxStatus:
  get:
    operationId: getTermuxStatus
    summary: Get Termux worker status
    tags: [Termux]
    responses:
      '200':
        description: Current Termux worker status.
        content:
          application/json:
            schema:
              type: object
              required: [status]
              properties:
                status:
                  type: string
                  enum: [ok, offline, starting, stopping, permission_needed]
                  description: Status of the Termux worker.
            example:
              status: ok

termuxRestart:
  post:
    operationId: postTermuxRestart
    summary: Restart the Termux worker
    tags: [Termux]
    requestBody:
      required: false
      content:
        application/json:
          schema:
            type: object
    responses:
      '200':
        description: Restart initiated.
        content:
          application/json:
            schema:
              type: object
              required: [status]
              properties:
                status:
                  type: string
                  const: ok
            example:
              status: ok

termuxSetupShow:
  post:
    operationId: postTermuxSetupShow
    summary: Prompt the UI to open the Termux setup wizard
    description: >
      Sets a one-shot flag that the UI consumes on its next /termux/status poll
      (every 3 s). The setup wizard modal auto-opens in the web UI. Use this
      when a shell tool fails because Termux is not installed or bootstrapped.
    tags: [Termux]
    requestBody:
      required: false
      content:
        application/json:
          schema:
            type: object
    responses:
      '200':
        description: Flag set successfully.
        content:
          application/json:
            schema:
              type: object
              required: [status]
              properties:
                status:
                  type: string
                  const: ok
            example:
              status: ok

termuxEval:
  post:
    operationId: postTermuxEval
    summary: Evaluate code in Termux environment
    tags: [Termux]
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required: [code]
            properties:
              code:
                type: string
                description: Code to evaluate in the Termux environment.
          example:
            code: "print('hello')"
    responses:
      '200':
        description: Evaluation result.
        content:
          application/json:
            schema:
              type: object
              required: [status]
              properties:
                status:
                  type: string
                stdout:
                  type: string
                stderr:
                  type: string
      '500':
        description: Evaluation error.
        content:
          application/json:
            schema:
              $ref: '../components/schemas.yaml#/ErrorResponse'
